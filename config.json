{
    "loaders": [
        {
            "type": "node",
            "name": "node",
            "configuration": {
                "binding.path": "./bin/libnodejs_binding.so"
            }
        }
    ],
    "modules": [
        {
            "name": "native-iothub",
            "loader": {
                "name": "native",
                "entrypoint": {
                    "module.path": "./bin/libiothub.so"
                }
            },
            "args": {
                "IoTHubName": "IoT-Hub-17minds",
                "IoTHubSuffix": "azure-devices.net",
                "Transport": "AMQP"
            }
        },
        {
            "name": "mapping",
            "loader": {
                "name": "native",
                "entrypoint": {
                    "module.path": "./bin/libidentity_map.so"
                }
            },
            "args": [
                {
                    "macAddress": "AA:BB:CC:DD:EE:FF",
                    "deviceId": "AnotherSampleDevice",
                    "deviceKey": "x+SoC92iBx42rF80d8vWSNPNJc6kHw4NQC1MEWByqrQ="
                }
            ]
        },
        {
            "name": "api",
            "loader": {
                "name": "node",
                "entrypoint": {
                    "main.path": "./modules/api.js"
                }
            },
            "args": null
        },
        {
            "name": "batch",
            "loader": {
                "name": "node",
                "entrypoint": {
                    "main.path": "./modules/batch.js"
                }
            },
            "args": null
        },
        {
            "name": "filter",
            "loader": {
                "name": "node",
                "entrypoint": {
                    "main.path": "./modules/filter.js"
                }
            },
            "args": {
                "eda_min": "20",
                "eda_max": "40"
            }
        },
        {
            "name": "printer",
            "loader": {
                "name": "node",
                "entrypoint": {
                    "main.path": "./modules/printer.js"
                }
            },
            "args": null
        },
        {
            "name": "simulated-device",
            "loader": {
                "name": "node",
                "entrypoint": {
                    "main.path": "./modules/simulated-device.js"
                }
            },
            "args": null
        },
        {
            "name": "node_iothub",
            "loader": {
                "name": "node",
                "entrypoint": {
                    "main.path": "./modules/iothub.js"
                }
            },
            "args": {
                "connection_string": "HostName=IoT-Hub-17minds.azure-devices.net;DeviceId=AnotherSampleDevice;SharedAccessKey=x+SoC92iBx42rF80d8vWSNPNJc6kHw4NQC1MEWByqrQ="
            }
        },
        {
            "name": "Logger",
            "loader": {
                "name": "native",
                "entrypoint": {
                    "module.path": "./bin/liblogger.so"
                }
            },
            "args": {
                "filename": "log.txt"
            }
        }
    ],
    "links": [
        {
            "source": "*",
            "sink": "Logger"
        },
        {
            "source": "*",
            "sink": "printer"
        },
        {
            "source": "api",
            "sink": "filter"
        },
        {
            "source": "filter",
            "sink": "batch"
        },
        {
            "source": "batch",
            "sink": "mapping"
        },
        {
            "source": "mapping",
            "sink": "native-iothub"
        }

    ]
}